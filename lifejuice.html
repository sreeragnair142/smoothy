<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Life Juice</title>
    <!-- Stylesheets -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Niconne&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Tangerine:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
    <link rel="icon" href="images/favicon.png" type="image/x-icon">
    <!-- Responsive -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
</head>

<body class="hidden-bar-wrapper">
    <div class="page-wrapper">
        <!-- Preloader -->
        <div class="preloader"></div>

        <!-- Main Header -->
        <header class="main-header header-style-one">
            <!-- Header Upper -->
            <div class="header-upper">
                <div class="auto-container clearfix">
                    <div class="pull-left logo-box">
                        <div class="logo"><a href="index.html"><img src="images/smoothie logo web white.png" alt=""
                                    title=""></a></div>
                    </div>
                    <div class="nav-outer clearfix">
                        <!-- Mobile Navigation Toggler -->
                        <div class="mobile-nav-toggler"><span class="icon flaticon-menu"></span></div>
                        <!-- Main Menu -->
                        <nav class="main-menu navbar-expand-md">
                            <div class="navbar-header">
                                <!-- Toggle Button -->
                                <button class="navbar-toggler" type="button" data-toggle="collapse"
                                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                    aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </button>
                            </div>

                            <div class="navbar-collapse collapse clearfix" id="navbarSupportedContent">
                                <ul class="navigation clearfix">
                                    <li class=""><a href="index.html">Home</a>
                                        <!-- <ul>
										<li><a href="index-2.html">Homepage One</a></li>
										<li><a href="index-3.html">Homepage Two</a></li>
										<li><a href="index-4.html">Homepage Three</a></li>
										<li><a href="index-5.html">Homepage Four</a></li>
										<li class="dropdown"><a href="#">Header Styles</a>
											<ul>
												<li><a href="index-2.html">Header Style One</a></li>
												<li><a href="index-3.html">Header Style Two</a></li>
												<li><a href="index-4.html">Header Style Three</a></li>
												<li><a href="index-4.html">Header Style Four</a></li>
											</ul>
										</li>
									</ul> -->
                                    </li>
                                    <li class="dropdown">
                                        <a href="about.html" class="" data-toggle="dropdown">About</a>
                                        <!-- <ul class="dropdown-menu">
											<li><a href="about.html">About Us</a></li>
											<li><a href="team.html">Team</a></li>
											<li><a href="restaurant.html">Restaurant</a></li>
										</ul> -->
                                    </li>
                                    <li class="dropdown">
                                        <a href="menu.html" class="" data-toggle="dropdown">Our Products</a>
                                        <ul class="dropdown-menu">
                                            <li><a href="smoothys.html">Smoothys</a></li>
                                            <li><a href="milkshake.html">Milk Shake</a></li>
                                            <li><a href="frappe.html">Frappe</a></li>
                                            <li><a href="veganshakes.html">Vegan shakes</a></li>
                                            <li><a href="frootfraps.html">Frootfraps</a></li>
                                            <li><a href="lifejuice.html">Life juice</a></li>
                                            <li><a href="frozenfruits.html">Frozen Fruits</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown">
                                        <a href="events.html" class="" data-toggle="dropdown">Events</a>

                                    </li>


                                    <li class="dropdown">
                                        <a href="blog-classic.html" class="" data-toggle="dropdown">Blog</a>

                                    </li>
                                    <li class="dropdown"><a href="vendingmachine.html"
                                            data-toggle="dropdown">Vendingmachine</a>

                                    <li><a href="contact.html">Contact us</a></li>
                                </ul>
                            </div>
                        </nav>
                        <!-- Main Menu End -->
                        <div class="outer-box clearfix">
                            <div class="nav-btn navSidebar-button"><span class="icon flaticon-menu-2"></span></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Header Upper -->

            <!-- Sticky Header -->
            <div class="sticky-header">
                <div class="auto-container clearfix">
                    <div class="logo pull-left">
                        <a href="index.html" title=""><img src="images/smoothie logo web (1).png" style="height: 60px;"
                                title=""></a>
                    </div>
                    <div class="pull-right">
                        <nav class="main-menu"></nav>
                        <div class="outer-box clearfix">
                            <div class="nav-btn navSidebar-button"><span class="icon flaticon-menu-2"></span></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Sticky Menu -->

            <!-- Mobile Menu -->
            <div class="mobile-menu">
                <div class="menu-backdrop"></div>
                <div class="close-btn"><span class="icon flaticon-multiply"></span></div>
                <nav class="menu-box">
                    <div class="nav-logo"><a href="index.html"><img src="images/smoothie logo web (1).png"
                                style="height: 60px;" alt="" title=""></a></div>
                    <div class="menu-outer"></div>
                </nav>
            </div>
            <!-- End Mobile Menu -->
        </header>
        <!-- End Main Header -->

        <!-- Sidebar Cart Item -->
        <div class="xs-sidebar-group info-group">
            <div class="xs-overlay xs-bg-black"></div>
            <div class="xs-sidebar-widget">
                <div class="sidebar-widget-container">
                    <div class="widget-heading">
                        <a href="#" class="close-side-widget">X</a>
                    </div>
                    <div class="sidebar-textwidget">
                        <div class="sidebar-info-contents">
                            <div class="content-inner">
                                <div class="logo">
                                    <a href="index.html"><img src="images/logo.png" alt="" /></a>
                                </div>
                                <div class="content-box">
                                    <h2>About Us</h2>
                                    <p class="text">The argument in favor of using filler text goes something like this:
                                        If you use real content in the Consulting Process, anytime you reach a review
                                        point you'll end up reviewing and negotiating the content itself and not the
                                        design.</p>
                                    <a href="contact.html" class="theme-btn btn-style-one clearfix"><span
                                            class="icon"></span>Consultation</a>
                                </div>
                                <div class="contact-info">
                                    <h2>Contact Info</h2>
                                    <ul class="list-style-one">
                                        <li><span class="icon fa fa-location-arrow"></span>Chicago 12, Melborne City,
                                            USA</li>
                                        <li><span class="icon fa fa-phone"></span>(111) 111-111-1111</li>
                                        <li><span class="icon fa fa-envelope"></span>smoothy@gmail.com</li>
                                        <li><span class="icon fa fa-clock-o"></span>Week Days: 09.00 to 18.00 Sunday:
                                            Closed</li>
                                    </ul>
                                </div>
                                <ul class="social-box">
                                    <li class="facebook"><a href="#" class="fa fa-facebook-f"></a></li>
                                    <li class="twitter"><a href="#" class="fa fa-twitter"></a></li>
                                    <li class="linkedin"><a href="#" class="fa fa-linkedin"></a></li>
                                    <li class="instagram"><a href="#" class="fa fa-instagram"></a></li>
                                    <li class="youtube"><a href="#" class="fa fa-youtube"></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END sidebar widget item -->

        <!-- Page Title -->
        <section class="page-title" style="background-image: url(images/background/6.jpg)">
            <div class="pattern-layer" style="background-image: url(images/background/pattern-7.png)"></div>
            <div class="auto-container">
                <h2>Life Juice</h2>
                <ul class="page-breadcrumb">
                    <li><a href="index.html">home</a></li>
                    <li>Life Juice</li>
                </ul>
            </div>
        </section>
        <!-- End Page Title -->

        <!-- Life Juice Section -->
        <section class="lifejuice-section">
            <div class="icon-layer-one" style="background-image: url(images/icons/icon-1.png)"></div>
            <div class="icon-layer-two" style="background-image: url(images/icons/icon-2.png)"></div>
            <div class="icon-layer-three" style="background-image: url(images/icons/icon-3.png)"></div>
            <div class="auto-container">
                <div class="inner-container">
                    <div class="big-image">
                        <img src="images/resource/08.jpg" alt="" />
                    </div>
                    <div class="lower-content">
                        <div class="section-text">refreshing</div>
                        <div class="text">
                            <p>Life Juice is a vibrant, nutrient-packed beverage made from freshly squeezed fruits and
                                vegetables, designed to energize and nourish your body. Crafted with natural
                                ingredients, it offers a burst of vitamins and minerals without added sugars or
                                preservatives.</p>
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                                exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
                                dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Life Juice Section -->

        <!-- Menus Section -->
        <section class="menus-section style-two">
            <figure class="menu-bottom-image">
                <img src="images/resource/menu-10.png" alt="">
            </figure>
            <div class="auto-container">
                <!-- Sec Title -->
                <div class="sec-title centered">
                    <h2 class="main-heading">Explore Our <span>Life Juice Variations</span></h2>
                    <div class="gradient-underline"></div>
                    <p class="sub-text">Discover a refreshing range of Life Juices crafted to boost your vitality.</p>
                </div>

                <!-- Loading State -->
                <div id="loading-message" class="text-center mb-4 d-none">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    Loading...
                </div>

                <!-- Error Message -->
                <div id="error-message" class="alert alert-danger d-none text-center mb-4" role="alert"></div>

                <!-- Category Tabs -->
                <div class="category-tabs text-center mb-5">
                    <ul class="nav nav-tabs justify-content-center subcategory-nav" id="lifejuiceTab" role="tablist">
                    </ul>
                </div>

                <!-- Tab Content -->
                <div class="tab-content" id="lifejuiceTabContent"></div>
            </div>
        </section>
        <!-- End Menus Section -->

        <!-- Gallery Section -->
        <section class="gallery-section">
            <div class="outer-container">
                <div class="gallery-carousel owl-carousel owl-theme">
                    <!-- Gallery Blocks -->
                    <div class="gallery-block">
                        <div class="inner-box">
                            <figure class="image-box">
                                <img src="images/gallery/1.jpg" alt="">
                                <div class="overlay-box">
                                    <div class="overlay-inner">
                                        <div class="content">
                                            <a href="images/gallery/1.jpg" data-fancybox="gallery" data-caption=""
                                                class="icon flaticon-plus"></a>
                                        </div>
                                    </div>
                                </div>
                            </figure>
                        </div>
                    </div>
                    <div class="gallery-block">
                        <div class="inner-box">
                            <figure class="image-box">
                                <img src="images/gallery/2.jpg" alt="">
                                <div class="overlay-box">
                                    <div class="overlay-inner">
                                        <div class="content">
                                            <a href="images/gallery/2.jpg" data-fancybox="gallery" data-caption=""
                                                class="icon flaticon-plus"></a>
                                        </div>
                                    </div>
                                </div>
                            </figure>
                        </div>
                    </div>
                    <div class="gallery-block">
                        <div class="inner-box">
                            <figure class="image-box">
                                <img src="images/gallery/3.jpg" alt="">
                                <div class="overlay-box">
                                    <div class="overlay-inner">
                                        <div class="content">
                                            <a href="images/gallery/3.jpg" data-fancybox="gallery" data-caption=""
                                                class="icon flaticon-plus"></a>
                                        </div>
                                    </div>
                                </div>
                            </figure>
                        </div>
                    </div>
                    <div class="gallery-block">
                        <div class="inner-box">
                            <figure class="image-box">
                                <img src="images/gallery/4.jpg" alt="">
                                <div class="overlay-box">
                                    <div class="overlay-inner">
                                        <div class="content">
                                            <a href="images/gallery/4.jpg" data-fancybox="gallery" data-caption=""
                                                class="icon flaticon-plus"></a>
                                        </div>
                                    </div>
                                </div>
                            </figure>
                        </div>
                    </div>
                    <div class="gallery-block">
                        <div class="inner-box">
                            <figure class="image-box">
                                <img src="images/gallery/5.jpg" alt="">
                                <div class="overlay-box">
                                    <div class="overlay-inner">
                                        <div class="content">
                                            <a href="images/gallery/5.jpg" data-fancybox="gallery" data-caption=""
                                                class="icon flaticon-plus"></a>
                                        </div>
                                    </div>
                                </div>
                            </figure>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Gallery Section -->

        <!-- Main Footer -->
        <footer class="main-footer">
            <div class="pattern-layer-one" style="background-image: url(images/resource/footer-pattern-1.png)"></div>
            <div class="pattern-layer-two" style="background-image: url(images/resource/footer-pattern-2.png)"></div>
            <div class="pattern-layer-three" style="background-image: url(images/background/pattern-6.png)"></div>
            <div class="auto-container">
                <div class="widgets-section">
                    <div class="row clearfix">
                        <div class="big-column col-lg-6 col-md-12 col-sm-12">
                            <div class="row clearfix">
                                <div class="footer-column col-lg-6 col-md-6 col-sm-12">
                                    <div class="footer-widget contact-widget">
                                        <h6>Contact Us</h6>
                                        <div class="text">Meydan Grandstand ,6th floor, Meydan Road ,Nad Al Sheba, Dubai, U.A.E</div>
                                        <ul class="contact-list">
                                            <li><span class="icon fa fa-send"></span>aliolive@me.com</li>
                                            <li><span class="icon fa fa-phone"></span><a
                                                    href="tel:+123-4567-89000">+971565876625</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="footer-column col-lg-6 col-md-6 col-sm-12">
                                    <div class="footer-widget links-widget">
                                        <h6>Useful Links</h6>
                                        <ul class="footer-list">
                                           <li><a href="index.html">Home</a></li>
											<li><a href="about.html">About us</a></li>
											<li><a href="blog-classic.html">Blogs</a></li>
											<li><a href="events.html">Events</a></li>
											<li><a href="contact.html">Contact Us</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="big-column col-lg-6 col-md-12 col-sm-12">
                            <div class="row clearfix">
                                <div class="footer-column col-lg-6 col-md-6 col-sm-12">
                                    <div class="footer-widget social-widget">
                                        <h6>Follow Us Now</h6>
                                        <ul class="social-list">
                                            <li><a href="#"><span class="icon fa fa-facebook"></span>facebook</a></li>
                                            <li><a href="#"><span class="icon fa fa-twitter"></span>twitter</a></li>
                                            <li><a href="#"><span class="icon fa fa-instagram"></span>instagram</a></li>
                                            <li><a href="#"><span class="icon fa fa-dribbble"></span>dribbble</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="footer-column col-lg-6 col-md-6 col-sm-12">
                                    <div class="footer-widget newsletter-widget">
                                        <h6>Subscribe</h6>
                                        <div class="newsletter-form">
                                            <form method="post" action="contact.html">
                                                <div class="form-group">
                                                    <input type="email" name="email" value="" placeholder="Your Email"
                                                        required="">
                                                    <button type="submit" class="theme-btn submit-btn">Subscribe
                                                        Now</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="copyright">© 2025 Bloombiz Careatives All Rights Reserved.</div>
                </div>
            </div>
        </footer>
        <!-- End Main Footer -->

        <!-- Search Popup -->
        <div class="search-popup">
            <button class="close-search style-two"><span class="flaticon-multiply"></span></button>
            <button class="close-search"><span class="flaticon-up-arrow-1"></span></button>
            <form method="post" action="blog.html">
                <div class="form-group">
                    <input type="search" name="search-field" value="" placeholder="Search Here" required="">
                    <button type="submit"><i class="fa fa-search"></i></button>
                </div>
            </form>
        </div>
        <!-- End Header Search -->

        <!-- Scroll to top -->
        <div class="scroll-to-top scroll-to-target" data-target="html"><span class="fa fa-arrow-up"></span></div>

        <!-- JavaScript -->
        <script src="js/jquery.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/jquery.fancybox.js"></script>
        <script src="js/appear.js"></script>
        <script src="js/parallax.min.js"></script>
        <script src="js/tilt.jquery.min.js"></script>
        <script src="js/jquery.paroller.min.js"></script>
        <script src="js/owl.js"></script>
        <script src="js/wow.js"></script>
        <script src="js/isotope.js"></script>
        <script src="js/nav-tool.js"></script>
        <script src="js/jquery-ui.js"></script>
        <script src="js/script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Updated Script Block -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Handle dropdown parent link navigation
                const dropdownParents = document.querySelectorAll('.dropdown > a');
                dropdownParents.forEach(function (parentLink) {
                    parentLink.addEventListener('click', function (e) {
                        const href = this.getAttribute('href');
                        if (href && href !== '#' && href !== 'javascript:;') {
                            window.location.href = href;
                            e.preventDefault();
                        }
                    });
                });

                // --- DYNAMIC LIFE JUICE SECTION ---
                const API_BASE_URL = 'http://localhost:5000/api';
                const loadingDiv = document.getElementById('loading-message');
                const errorDiv = document.getElementById('error-message');
                const tabList = document.getElementById('lifejuiceTab');
                const tabContent = document.getElementById('lifejuiceTabContent');

                function showLoading() {
                    loadingDiv.classList.remove('d-none');
                }

                function hideLoading() {
                    loadingDiv.classList.add('d-none');
                }

                function showError(message) {
                    hideLoading();
                    errorDiv.textContent = message;
                    errorDiv.classList.remove('d-none');
                    console.error('Error Displayed:', message);
                }

                function hideError() {
                    errorDiv.classList.add('d-none');
                }

                async function makeApiRequest(endpoint) {
                    try {
                        const url = `${API_BASE_URL}${endpoint}`;
                        console.log(`Fetching data from: ${url}`);
                        const response = await fetch(url);

                        if (!response.ok) {
                            const errorData = await response.json().catch(() => ({}));
                            throw new Error(errorData.message || `API request failed with status ${response.status}`);
                        }

                        const data = await response.json();
                        console.log(`Successfully received data for ${endpoint}:`, data);
                        return data;
                    } catch (err) {
                        console.error(`API request to ${endpoint} failed:`, err);
                        throw err;
                    }
                }

                function renderProducts(products, container) {
                    // Clear the container first
                    container.innerHTML = '';

                    if (!products || products.length === 0) {
                        container.innerHTML = `<p class="text-center text-muted mt-4">No active Life Juices found in this category.</p>`;
                        return;
                    }

                    const row = document.createElement('div');
                    row.className = 'row clearfix';

                    const leftColumn = document.createElement('div');
                    leftColumn.className = 'menu-column col-lg-6 col-md-12 col-sm-12';
                    const leftInner = document.createElement('div');
                    leftInner.className = 'inner-column';
                    leftColumn.appendChild(leftInner);

                    const rightColumn = document.createElement('div');
                    rightColumn.className = 'menu-column col-lg-6 col-md-12 col-sm-12';
                    const rightInner = document.createElement('div');
                    rightInner.className = 'inner-column';
                    rightColumn.appendChild(rightInner);

                    products.forEach((product, index) => {
                        // Better image URL handling
                        let imageUrl = 'images/resource/menu-11.jpg'; // Default fallback image

                        if (product.images && product.images.length > 0) {
                            const firstImage = product.images[0];
                            if (firstImage.startsWith('http')) {
                                imageUrl = firstImage;
                            } else {
                                // Remove any leading slashes to avoid double slashes
                                const cleanPath = firstImage.replace(/^\/+/, '');
                                imageUrl = `${API_BASE_URL}/${cleanPath}`;
                            }
                        }

                        const productHtml = `
                        <div class="menu-block">
                            <div class="inner-box">
                                <div class="menu-image">
                                    <a href="strawberry.html?id=${product._id}">
                                        <img src="${imageUrl}" 
                                             alt="${product.name || 'Life Juice Image'}" 
                                             onerror="this.onerror=null;this.src='images/resource/menu-11.jpg';" />
                                    </a>
                                </div>
                                <h6><a href="strawberry.html?id=${product._id}">${product.name || 'Unnamed Life Juice'}</a></h6>
                                <div class="title">${product.description || 'No description available.'}</div>
                                <div class="price-box">
                                    <span class="price">$${product.price ? product.price.toFixed(2) : 'N/A'}</span>
                                </div>
                            </div>
                        </div>
                    `;

                        // Alternate between left and right columns
                        if (index % 2 === 0) {
                            leftInner.innerHTML += productHtml;
                        } else {
                            rightInner.innerHTML += productHtml;
                        }
                    });

                    row.appendChild(leftColumn);
                    row.appendChild(rightColumn);
                    container.appendChild(row);
                }

                async function initializeMenu() {
                    showLoading();
                    hideError();

                    try {
                        console.log('Starting menu initialization for Life Juice page...');

                        // Fetch products assigned to /lifejuice.html
                        const productResponse = await makeApiRequest('/products?active=true&productPageUrl=/lifejuice.html');
                        console.log('Product response for /lifejuice.html:', productResponse);

                        // Handle different response structures for products
                        let allProducts = [];
                        if (Array.isArray(productResponse)) {
                            allProducts = productResponse;
                        } else if (productResponse.products) {
                            allProducts = productResponse.products;
                        } else if (productResponse.data) {
                            allProducts = productResponse.data;
                        }

                        if (!allProducts || allProducts.length === 0) {
                            showError('No Life Juices found for this page. Please assign products to the Life Juice page in the admin panel.');
                            return;
                        }

                        console.log(`Found ${allProducts.length} products for /lifejuice.html`);

                        // Group products by category
                        const productsByCategory = {};
                        const categoryInfo = {};

                        allProducts.forEach(product => {
                            // Skip Smoothie Bowls category
                            let categoryId, categoryName;

                            if (product.category) {
                                if (typeof product.category === 'object') {
                                    categoryId = product.category._id;
                                    categoryName = product.category.name;
                                } else {
                                    categoryId = product.category;
                                    categoryName = product.categoryName || 'Unknown Category';
                                }
                            } else if (product.categoryId) {
                                categoryId = product.categoryId;
                                categoryName = product.categoryName || 'Unknown Category';
                            } else {
                                console.warn('Product missing category information:', product);
                                return; // Skip products without category
                            }

                            // Skip if category is "Smoothie Bowls"
                            if (categoryName.toLowerCase() === 'smoothie bowls') {
                                console.log(`Skipping product in "Smoothie Bowls" category: ${product.name}`);
                                return;
                            }

                            // Store category info
                            if (!categoryInfo[categoryId]) {
                                categoryInfo[categoryId] = {
                                    _id: categoryId,
                                    name: categoryName
                                };
                            }

                            // Group products by category
                            if (!productsByCategory[categoryId]) {
                                productsByCategory[categoryId] = [];
                            }
                            productsByCategory[categoryId].push(product);
                        });

                        console.log('Products grouped by category:', productsByCategory);
                        console.log('Category info:', categoryInfo);

                        // Get unique categories that have products
                        const categoriesWithProducts = Object.keys(productsByCategory).map(categoryId => categoryInfo[categoryId]);

                        if (categoriesWithProducts.length === 0) {
                            showError('No categories with Life Juices found for this page.');
                            return;
                        }

                        console.log(`Found ${categoriesWithProducts.length} categories with products:`, categoriesWithProducts.map(c => c.name));

                        // Clear existing content
                        tabList.innerHTML = '';
                        tabContent.innerHTML = '';

                        // Create tabs for each category that has products
                        categoriesWithProducts.forEach((category, index) => {
                            const categoryId = category._id;
                            const categoryName = category.name;
                            const isActive = index === 0;
                            const tabId = `tab-${categoryId}`;
                            const paneId = `pane-${categoryId}`;

                            // Create tab button
                            const tabItem = document.createElement('li');
                            tabItem.className = 'nav-item';
                            tabItem.setAttribute('role', 'presentation');

                            const tabButton = document.createElement('button');
                            tabButton.className = `nav-link ${isActive ? 'active' : ''}`;
                            tabButton.id = tabId;
                            tabButton.setAttribute('data-bs-toggle', 'tab');
                            tabButton.setAttribute('data-bs-target', `#${paneId}`);
                            tabButton.setAttribute('type', 'button');
                            tabButton.setAttribute('role', 'tab');
                            tabButton.setAttribute('aria-controls', paneId);
                            tabButton.setAttribute('aria-selected', isActive.toString());
                            tabButton.textContent = categoryName;

                            tabItem.appendChild(tabButton);
                            tabList.appendChild(tabItem);

                            // Create tab pane with products
                            const tabPane = document.createElement('div');
                            tabPane.className = `tab-pane fade ${isActive ? 'show active' : ''}`;
                            tabPane.id = paneId;
                            tabPane.setAttribute('role', 'tabpanel');
                            tabPane.setAttribute('aria-labelledby', tabId);

                            tabContent.appendChild(tabPane);

                            // Render products for this category
                            const categoryProducts = productsByCategory[categoryId] || [];
                            console.log(`Rendering ${categoryProducts.length} products for category "${categoryName}"`);
                            renderProducts(categoryProducts, tabPane);
                        });

                        console.log('Menu initialization completed successfully');

                    } catch (err) {
                        console.error('Menu initialization failed:', err);
                        showError(`Failed to load Life Juices: ${err.message}. Please ensure the server is running and accessible.`);
                    } finally {
                        hideLoading();
                    }
                }

                // Listen for product updates (if you have real-time updates)
                window.addEventListener('productUpdated', () => {
                    console.log('Product update detected! Refreshing menu...');
                    initializeMenu();
                });

                // Initialize the menu when page loads
                initializeMenu();
            });
        </script>
        <!-- End Updated Script Block -->

        <!-- Custom Styles for Menus Section -->
        <style>
            /* Section Title Styling */
            .menus-section .sec-title {
                position: relative;
                margin-bottom: 40px;
            }

            .menus-section .main-heading {
                font-family: 'Niconne', cursive;
                font-size: 48px;
                color: #333;
                line-height: 1.2;
                margin-bottom: 15px;
                text-transform: capitalize;
            }

            .menus-section .main-heading span {
                color: #ff6f61;
                font-weight: 700;
            }

            .menus-section .gradient-underline {
                width: 100px;
                height: 4px;
                background: linear-gradient(90deg, #ff6f61, #ffb700);
                margin: 0 auto 20px;
                border-radius: 2px;
                transition: width 0.3s ease;
            }

            .menus-section .sec-title:hover .gradient-underline {
                width: 150px;
            }

            .menus-section .sub-text {
                font-family: 'Poppins', sans-serif;
                font-size: 16px;
                color: #666;
                max-width: 600px;
                margin: 0 auto;
            }

            /* Category Tabs Styling */
            .category-tabs {
                margin-bottom: 50px;
            }

            .subcategory-nav {
                display: flex;
                flex-wrap: wrap;
                gap: 15px;
                padding: 0;
                justify-content: center;
                list-style: none;
            }

            .subcategory-nav .nav-item {
                margin: 0;
            }

            .subcategory-nav .nav-link {
                font-family: 'Poppins', sans-serif;
                font-size: 16px;
                font-weight: 600;
                color: #4a4a4a;
                background: #fff;
                border: 2px solid #ff7e67;
                border-radius: 30px;
                padding: 10px 25px;
                transition: all 0.3s ease;
                box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
                text-transform: capitalize;
                max-width: 200px;
                /* Prevent overly long text */
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                display: inline-block;
            }

            .subcategory-nav .nav-link:hover {
                background: #ff7e67;
                color: #fff;
                transform: scale(1.05);
                box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15);
            }

            .subcategory-nav .nav-link.active {
                background: #ff7e67;
                color: #fff;
                border-color: #ff7e67;
                box-shadow: 0 5px 12px rgba(0, 0, 0, 0.2);
                transform: scale(1.05);
            }

            /* Responsive Adjustments for Heading */
            @media (max-width: 767px) {
                .menus-section .main-heading {
                    font-size: 36px;
                }

                .menus-section .sub-text {
                    font-size: 14px;
                }

                .menus-section .gradient-underline {
                    width: 80px;
                }

                .menus-section .sec-title:hover .gradient-underline {
                    width: 120px;
                }
            }

            @media (max-width: 576px) {
                .menus-section .main-heading {
                    font-size: 28px;
                }
            }

            /* Responsive Adjustments for Tabs */
            @media (max-width: 767px) {
                .subcategory-nav .nav-link {
                    font-size: 14px;
                    padding: 8px 20px;
                    max-width: 150px;
                }

                .subcategory-nav {
                    gap: 10px;
                }
            }

            @media (max-width: 576px) {
                .subcategory-nav .nav-link {
                    font-size: 12px;
                    padding: 6px 15px;
                    max-width: 120px;
                }

                .subcategory-nav {
                    gap: 8px;
                }
            }
        </style>
    </div>
    <!-- End pagewrapper -->
</body>

</html>